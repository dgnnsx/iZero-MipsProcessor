module unidade_de_controle(clock, reset, opcode, ula_controle);

	input clock;
	input reset;
	input [5:0] opcode;
	
	
	// FLAGS DE CONTROLE
	
	// multiplexadores
	//output reg muxULA;
	//output reg muxInstrucao;
	output reg muxBR;
	output reg muxULA;
	output reg [1:0] somador_PC;
	//output reg muxPC; // talvez ~n precise
	
	// controle ULA
	output reg [3:0] ula_controle;
	
	// controles de leitura / escrita / reset
	output reg pc_escrita;
	//output reg pc_reset;
	output reg reg_escrita;	
	output reg md_escrita;
	output reg md_leitura;
	
	
	// declaracao das instrucoes
	
	
	// OPCODE das instrucoes aritmeticas, logicas e de deslocamento
	localparam [5:0] 	ADD = 6'b000001, ADDI = 6'b000010, SUB = 6'b000011, SUBI = 6'b000100,
							AND = 6'b000101, ANDI = 6'b000110, OR = 6'b000111, ORI = 6'b001000, XOR = 6'b001001, XORI = 6'b001010, NOT = 6'b001011,
							SL = 6'b001100, SR = 6'b001101,
							MOV = 6'b001110; // RD = RS
							
							
	// OPCODE das instrucoes de transferencia
	localparam [5:0] LOAD = 6'b100000, LOADI = 6'b100001, STORE = 6'b100010;

	// OPCODE das instrucoes de entrada e saida
	localparam [5:0] IN = 6'b100011, OUT = 6'b100100;
		
	
	// OPCODE das instrucoes de controle do sistema
	localparam [5:0] HALT = 6'b000000, RESET = 6'b111111;
	
	always @ (posedge clock) begin
		case(opcode)
			ADD: begin
				muxBR = 1'b1;
				muxULA = 1'b0;
				somador_PC = 2'b00;
				ula_controle = 4'b0000;
				pc_escrita = 1'b0;
				reg_escrita = 1'b1;
				md_escrita = 1'b0;
				md_leitura = 1'b0;
			end
			
			ADDI: begin
				muxBR = 1'b0;
				muxULA = 1'b1;
				somador_PC = 2'b00;
				ula_controle = 4'b0001;
				pc_escrita = 1'b0;
				reg_escrita = 1'b1;
				md_escrita = 1'b0;
				md_leitura = 1'b0;
			
			end
			SUB: begin
				muxBR = 1'b1;
				muxULA = 1'b0;
				somador_PC = 2'b00;
				ula_controle = 4'b0010;
				pc_escrita = 1'b0;
				reg_escrita = 1'b1;
				md_escrita = 1'b0;
				md_leitura = 1'b0;
			end
			
			SUBI: begin
				muxBR = 1'b0;
				muxULA = 1'b1;
				somador_PC = 2'b00;
				ula_controle = 4'b0011;
				pc_escrita = 1'b0;
				reg_escrita = 1'b1;
				md_escrita = 1'b0;
				md_leitura = 1'b0;
			end
			
			AND: begin
				muxBR = 1'b1;
				muxULA = 1'b0;
				somador_PC = 2'b00;
				ula_controle = 4'b0100;
				pc_escrita = 1'b0;
				reg_escrita = 1'b1;
				md_escrita = 1'b0;
				md_leitura = 1'b0;
			end
			
			ANDI:begin
				muxBR = 1'b0;
				muxULA = 1'b1;
				somador_PC = 2'b00;
				ula_controle = 4'b0101;
				pc_escrita = 1'b0;
				reg_escrita = 1'b1;
				md_escrita = 1'b0;
				md_leitura = 1'b0;
			end
			
			OR: begin
				muxBR = 1'b1;
				muxULA = 1'b0;
				somador_PC = 2'b00;
				ula_controle = 4'b0110;
				pc_escrita = 1'b0;
				reg_escrita = 1'b1;
				md_escrita = 1'b0;
				md_leitura = 1'b0;
			end
			
			ORI: begin
				muxBR = 1'b0;
				muxULA = 1'b1;
				somador_PC = 2'b00;
				ula_controle = 4'b0111;
				pc_escrita = 1'b0;
				reg_escrita = 1'b1;
				md_escrita = 1'b0;
				md_leitura = 1'b0;
			end
			
			XOR: begin
				muxBR = 1'b1;
				muxULA = 1'b0;
				somador_PC = 2'b00;
				ula_controle = 4'b1000;
				pc_escrita = 1'b0;
				reg_escrita = 1'b1;
				md_escrita = 1'b0;
				md_leitura = 1'b0;			
			end
			
			XORI: begin
				muxBR = 1'b0;
				muxULA = 1'b1;
				somador_PC = 2'b00;
				ula_controle = 4'b1001;
				pc_escrita = 1'b0;
				reg_escrita = 1'b1;
				md_escrita = 1'b0;
				md_leitura = 1'b0;
			end
			
			NOT: begin
				muxBR = 1'b0;
				muxULA = 1'bx; // DONT CARE
				somador_PC = 2'b00;
				ula_controle = 4'b1010;
				pc_escrita = 1'b0;
				reg_escrita = 1'b1;
				md_escrita = 1'b0;
				md_leitura = 1'b0;
			end
			
			SL: begin
				muxBR = 1'b1;
				muxULA = 1'bx; // DONT CARE
				somador_PC = 2'b00;
				ula_controle = 4'b1011;
				pc_escrita = 1'b0;
				reg_escrita = 1'b1;
				md_escrita = 1'b0;
				md_leitura = 1'b0;
			end
			
			SR: begin
				muxBR = 1'b1;
				muxULA = 1'bx; // DONT CARE
				somador_PC = 2'b00;
				ula_controle = 4'b1100;
				pc_escrita = 1'b0;
				reg_escrita = 1'b1;
				md_escrita = 1'b0;
				md_leitura = 1'b0;
			end
			
			MOV: begin
				muxBR = 1'b0;
				muxULA = 1'bx; // DONT CARE
				somador_PC = 2'b00;
				ula_controle = 4'b1101;
				pc_escrita = 1'b0;
				reg_escrita = 1'b1;
				md_escrita = 1'b0;
				md_leitura = 1'b0;
			end
			
			LOAD: begin
				muxBR = 1'b0;
				muxULA = 1'b1;
				somador_PC = 2'b00;
				ula_controle = xxxxxxxxxxxxxxxx;
				pc_escrita = 1'b0;
				reg_escrita = 1'b1;
				md_escrita = 1'b0;
				md_leitura = 1'b1;
			end
			
			LOADI: begin
				muxBR = 1'b0;
				muxULA = 1'b1;
				somador_PC = 2'b00;
				ula_controle = xxxxxxxxxx;
				pc_escrita = 1'b0;
				reg_escrita = 1'b1;
				md_escrita = 1'b0;
				md_leitura = 1'b1;
			end
		
			STORE: begin
				muxBR = 1'b0;
				muxULA = 1'b1;
				somador_PC = 2'b00;
				ula_controle = xxxxxxxxxx;
				pc_escrita = 1'b0;
				reg_escrita = 1'b0;
				md_escrita = 1'b1;
				md_leitura = 1'b0;
			end
			
			
		
		
		endcase
			
	end
	
endmodule
